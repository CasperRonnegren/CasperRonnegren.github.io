<!DOCTYPE HTML>
<html>
<head>
    <title>Casper Portfolio</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
</head>
<body class="is-preload">
<div id="page-wrapper">

    <!-- Header -->
    <header id="header">
        <h1 id="logo"><a href="index.html">< Portfolio</a></h1>
        <nav id="nav">
        </nav>
    </header>

    <!-- Main -->
    <div id="main" class="wrapper style1">
        <div class="container">
            <header class="major"><h2>Low-Level Multiplayer</h2></header>

            <!-- Introduction -->
            <div class="row gtr-150">
                <div class="col-12 col-12-medium">
                    <b class="image fit" style="background-color: #12151e ;"><img src="images/Multi/Multi_Game.jpg" alt="" style="width: 80%; margin-left: auto; margin-right: auto"/></b>
                </div>
                <div class="col-12 col-12-medium">
                    <h3>Introduction</h3>
                    <p style="margin-bottom: 0">
                        For this project, me and a classmate decided to make a simple multiplayer game for the course we were taking.
                        I refer to it as simple, but it is the gameplay that was designed to be simple whereas the underlying architecture ended up becoming quite complex.
                        Originally, we used Unity's high-level networking library, <a href="https://docs.unity3d.com/Packages/com.unity.netcode.gameobjects@2.4/manual/index.html">Netcode for GameObjects</a>, 
                        to make the game, which we learned to use through <a href="https://unity.com/resources/ultimate-guide-advanced-multiplayer-networking">Unity's e-book</a> about multiplayer within the engine.
                        However, we quickly encountered a problem, and that was that we finished the game within the first week.
                        As the deadline was a month away, we decided to switch to using Unity's low-level networking library, <a href="https://docs.unity3d.com/Packages/com.unity.transport@2.5/manual/index.html">Unity Transport</a>, which proved to be significantly more of a challenge.
                    </p>
                </div>
                <div class="col-12 col-12-medium"><hr/></div>
            </div>

            <!-- Gameplay -->
            <div class="row gtr-150">
                <div class="col-12 col-12-medium">
                    <h3>Gameplay</h3>
                    <p style="margin-bottom: 0">
                        As mentioned, the gameplay is quite simple. 
                        The focus of the project was the underlying multiplayer architecture, 
                        so I tried coming up with an idea for a game where multiplayer itself is essential, but the development time for non-multiplayer aspects is kept minimal.
                        As for the game, the goal is for two players to cooperate in order to move upwards until the progress bar in the middle fills up which results in them winning.
                        To progress upwards, players can jump, move to the left or right, and also shoot shapes in the direction of their cursor by left-clicking.
                        A shape shot by a player stops in place once they press left-click once more.
                        The problem players face is that they are divided by a barrier (the yellow area), and cannot stop shapes in place on their side of the barrier.
                        Thus, to progress upwards, the players have to cooperate by shooting shapes over to each other which they can jump onto.
                        For added difficulty, we made the shapes to be fired randomized and made it so each player can only have 2 shapes in place at once.
                    </p>
                </div>
                <div class="col-12 col-12-medium"><hr/></div>
            </div>

            <!-- Architecture -->
            <div class="row gtr-150">
                <div class="col-12 col-12-medium">
                    <h3>Architecture</h3>
                    <p>
                        Multiplayer in the game was built through the low-level networking library <a href="https://docs.unity3d.com/Packages/com.unity.transport@2.5/manual/index.html">Unity Transport</a>.
                        To give a better perspective of what that means, we used Transport set up player connections, manage them, and to create packages to be sent between them.
                        In conjunction with Transport, we also used <a href="https://docs.unity.com/ugs/en-us/manual/relay/manual/introduction">Unity Relay</a> to establish connections over the web.
                        Relay acts as a proxy between the players and host and is useful as it deals with problems like changing networks and IP addresses, NAT, and firewalls between players.
                        I do want to mention that in addition to the relay solution which works over the web, we did also manage to set up a LAN solution solely through Transport.
                    </p>
                </div>
                <div class="col-6 col-12-medium"><b class="image fit"><img src="images/Multi/Multi_Lobby.jpg" alt="" /></b></div>
                <div class="col-6 col-12-medium"><b class="image fit"><img src="images/Multi/Multi_Players.jpg" alt="" /></b></div>
                <div class="col-12 col-12-medium">
                    <p>
                        We began our work by solving the problem the rest of our work would come to depend on: sending data from one player to another.
                        Fortunately, this wasn't to difficult as the documentation shows how to create a simple client and server, and how to send a package between them.
                        It is after this point that the work got a lot more interesting for us.
                        There are a lot of sources out there that explain networking concepts and what stuff like what UDP packages are, 
                        but when it came to how to actually utilize them to create stuff like games, we didn't really find any.
                        This meant that we were left to figure out that part for ourselves, which I found to be the most entertaining aspect of this project.
                    </p>
                    <p style="margin-bottom: 0">
                        Something I realized pretty much immediately is that we would be sending a lot of packages containing different types of data for the different parts of our game.
                        As such, we made it so the first piece of data in every package is an integer which is used as an identifier as to how the package is supposed to be read.
                        From then on it was mostly busy work setting up the game itself by creating protocols for how to write or read packages and implementing how the data itself utilized.
                        The most interesting parts to me during this process was just figuring out how data should be communicated between connections
                        and finding some clever optimizations to minimize the amount of data that needs to be communicated in the first place.
                    </p>
                </div>
            </div>
            <div class="col-12 col-12-medium"><hr/></div>
            
            <!-- Learn -->
            <div class="row gtr-150">
                <div class="col-12 col-12-medium"><h3>What I learned</h3></div>
                <div class="col-12 col-12-medium">
                    <p>
                        I learned a lot from this project.
                        What I consider of most value from what I have learned is the general understanding I now have of how data is communicated in games.
                        As mentioned, we started of by using <a href="https://docs.unity3d.com/Packages/com.unity.netcode.gameobjects@2.4/manual/index.html">Netcode for GameObjects</a>
                        to make the game, but we ultimately didn't end up learning a lot from that experience other than how to utilize the solutions the library provided.
                        In contrast, from having to write UDP packages myself and set up how they are communicated between players, 
                        I've come to have a more holistic understanding how games are networked on a deeper level which is also engine agnostic to an extent.
                        I did also end up learning a lot about network programming in general as I at one point tried to set up a solution of our own to establish connections instead of relying on
                        <a href="https://docs.unity.com/ugs/en-us/manual/relay/manual/introduction">Unity Relay</a>.
                        In the end, that wasn't successful due to port forwarding not being possible on my router.
                        However, I did manage to set up a solution that works locally, so we made it possible to choose in the menu whether to form 
                        connections over the web through Relay or to form connections over LAN.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Scripts -->
<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/jquery.scrolly.min.js"></script>
<script src="assets/js/jquery.dropotron.min.js"></script>
<script src="assets/js/jquery.scrollex.min.js"></script>
<script src="assets/js/browser.min.js"></script>
<script src="assets/js/breakpoints.min.js"></script>
<script src="assets/js/util.js"></script>
<script src="assets/js/main.js"></script>

</body>
</html>

<!--							<p style="margin: 0 0 1em 0">-->
<!--								This project ended up being divided into three major parts:-->
<!--							</p>-->
<!--							<ul style="margin: 0 0 1em 1em">-->
<!--								<li>Generation of the Terrain Map (ground).<br>-->
<!--									</li>-->
<!--								<li>Placement of larger structures on the Terrain Map.</li>-->
<!--								<li>Decorating the Terrain (Trees and Grass)</li>-->
<!--							</ul>-->
<!--							<p>-->
<!--								<a href="https://antoniosliapis.com/articles/pcgbook_dungeons.php#section3">Agent-Based Dungeon Growing</a>.-->
<!--							</p>-->
<!--						